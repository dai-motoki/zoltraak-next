--- original
+++ modified
@@ -108,6 +108,7 @@
 def diffp(file_name: str, request: str):
     """
     指定されたファイルに対して要望に基づいた変更を行います。
+    :param save_diff: Diffを保存するかどうか (y/n)
 
     :param file_name: 変更対象のファイル名
     :param request: 変更の要望
@@ -141,11 +142,12 @@
             print(f"パッチの適用中にエラーが発生しました: {str(e)}")
             return None
 
-        # Diffを時間付きで保存
-        timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
-        diff_file_name = f"{file_name}_{timestamp}.diff"
-        with open(diff_file_name, 'w', encoding='utf-8') as diff_file:
-            diff_file.write(diff_result)
+        # Diffを時間付きで保存（オプション）
+        if save_diff.lower() == 'y':
+            timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
+            diff_file_name = f"{file_name}_{timestamp}.diff"
+            with open(diff_file_name, 'w', encoding='utf-8') as diff_file:
+                diff_file.write(diff_result)
 
         print(f"Diffが{diff_file_name}に保存されました。")
 
@@ -164,10 +166,11 @@
     parser = argparse.ArgumentParser(description="ファイルに対して要望に基づいた変更を行います。")
     parser.add_argument("-f", "--file", required=True, help="変更対象のファイル名")
     parser.add_argument("-r", "--request", help="変更の要望")
+    parser.add_argument("-s", "--save-diff", choices=['y', 'n'], default='n', help="Diffを保存するかどうか")
     parser.add_argument("-rf", "--request-file", help="要求を含むファイル")
     
     args = parser.parse_args()
     
     if args.request_file:
         with open(args.request_file, 'r', encoding='utf-8') as request_file:
             request = request_file.read().strip()
     else:
         request = args.request
     
-    diffp(args.file, request)
+    diffp(args.file, request, args.save_diff)